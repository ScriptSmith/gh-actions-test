project:
  name: rdrf

ccgplatform:
  version: "1.10"

ccgpuppet:
  version: "1.10"

instances:
  dev:
    extends: centos_66_lxc
    puppet_manifest: dev.pp
    pre_puppet:
      - which git || sudo yum install -y -q git
      - which librarian-puppet || sudo gem install librarian-puppet -v 1.4.0
      - which puppet || sudo yum install -y -q puppet
    post_puppet: 
      - echo running hooks
      - ./develop.sh install
      - ./develop.sh syncmigrate
      - echo finished running hooks

  aws-syd-rdrf-rpm-staging:
    pre_puppet:
      - which git || sudo yum install -y -q git
      - which librarian-puppet || sudo gem install librarian-puppet
      - which puppet || sudo yum install -y -q puppet
    extends: centos_66_aws_syd
    puppet_manifest: rpmstaging.pp
    aws_security_groups:
      - default
      - ssh
      - proxied
      - rdsaccess
      - web

  ccg_syd_nginx_staging:
    instance_class: fixed
    ssh_user: ubuntu
    fixed_ip_address: staging.ccgapps.com.au
    key_filename: ~/.ssh/ccg-syd-staging-2014.pem
