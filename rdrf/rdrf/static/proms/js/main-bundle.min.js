var rdrfts=(window.webpackJsonprdrfts=window.webpackJsonprdrfts||[]).push([[2],{10:function(e,t,n){"use strict";var o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e};Object.defineProperty(t,"__esModule",{value:!0});var r=n(31);t.goPrevious=r.createAction("PROMS_PREVIOUS"),t.goNext=r.createAction("PROMS_NEXT"),t.submitAnswers=r.createAction("PROMS_SUBMIT"),t.enterData=r.createAction("PROMS_ENTER_DATA");var s=n(52),a=n(51);a.default.defaults.xsrfHeaderName="X-CSRFTOKEN",a.default.defaults.xsrfCookieName="csrftoken";var i,c={stage:0,answers:{},questions:s.evalElements(window.proms_config.questions,{answers:{}}),title:""};function u(e,t){var n=e.payload.cde,r=e.payload.value,s=t.answers,a=o({},s);return a[n]=r,a}t.promsPageReducer=r.handleActions(((i={})[t.goPrevious]=function(e,t){return o({},e,{stage:e.stage-1})},i[t.goNext]=function(e,t){return o({},e,{stage:e.stage+1})},i[t.submitAnswers]=function(e,t){var n,o,r,s,i,c;return console.log("submitting answers"),n=e.answers,o=window.proms_config.patient_token,r=window.proms_config.registry_code,s=window.proms_config.survey_name,i=window.proms_config.survey_endpoint,c={patient_token:o,registry_code:r,survey_name:s,answers:n},a.default.post(i,c).then(function(e){return window.location.replace(window.proms_config.completed_page)}).catch(function(e){return alert(e.toString())}),e},i[t.enterData]=function(e,t){console.log("enterData action received"),console.log("action = "+t.toString()),console.log("answers before update = "+e.answers.toString());var n=u(t,e);console.log("updated answers = "+n.toString());var r=o({},e,{answers:u(t,e),questions:s.evalElements(window.proms_config.questions,{answers:n})});return console.log("newState = "+r.toString()),r},i),c)},52:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.evalElements=function(e,t){return e.filter(function(e){return function(e,t){switch(e.tag){case"cde":return!0;case"cond":return function(e,t){if(!t.answers.hasOwnProperty(e.cde))return!1;var n=t.answers[e.cde];switch(e.op){case"=":return n==e.value;default:return!1}}(e.cond,t);default:return!1}}(e,t)})}},55:function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),a=n(54),i=n(8),c=n(7),u=n(10),l=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.handleChange=function(e){console.log("radio button clicked"),console.log(e);var t=e.target.value,n=e.target.name;console.log("cde = "+n.toString()),console.log("value = "+t.toString()),this.props.enterData(n,t)},t.prototype.render=function(){var e=this,t=this.props.questions[this.props.stage];return s.createElement(c.Form,null,s.createElement(c.FormGroup,{tag:"fieldset"},s.createElement("legend",null,this.props.questions[this.props.stage].title)),a.map(t.options,function(n,o){return s.createElement(c.FormGroup,{check:!0},s.createElement(c.Label,{check:!0},s.createElement(c.Input,{type:"radio",name:e.props.questions[e.props.stage].cde,value:n.code,onChange:e.handleChange.bind(e),checked:n.code===e.props.answers[t.cde]}),n.text))}))},t}(s.Component);t.default=i.connect(function(e){return{questions:e.questions,stage:e.stage,answers:e.answers}},function(e){return{enterData:function(t,n){return e(u.enterData({cde:t,value:n}))}}})(l)},56:function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.createElement("div",{className:"instruction"},this.props.instructions)},t}(s.Component);t.default=a},57:function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),a=n(8),i=n(11),c=n(56),u=n(55),l=n(10),p=n(7),f=n(7),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.atEnd=function(){var e=this.props.questions.length-1;return console.log("lastIndex = "+e.toString()),console.log("stage = "+this.props.stage.toString()),this.props.stage==e},t.prototype.render=function(){var e;return this.atEnd()?(console.log("at end"),e=s.createElement(p.Button,{onClick:this.props.submitAnswers},"Submit Answers")):(console.log("not at end"),e=s.createElement(p.Button,{onClick:this.props.goNext},"Next")),s.createElement("div",{className:"App"},s.createElement(f.Container,null,s.createElement(f.Row,null,s.createElement(f.Col,null,s.createElement(c.default,{stage:this.props.stage}))),s.createElement(f.Row,null,s.createElement(f.Col,null,s.createElement(u.default,{title:this.props.title,stage:this.props.stage,questions:this.props.questions}))),s.createElement(f.Row,null,s.createElement(f.Col,null,s.createElement(p.Button,{onClick:this.props.goPrevious},"Prev")),s.createElement(f.Col,null,e))))},t}(s.Component);t.default=a.connect(function(e){return{stage:e.stage,title:e.title,questions:e.questions}},function(e){return i.bindActionCreators({goNext:l.goNext,goPrevious:l.goPrevious,submitAnswers:l.submitAnswers},e)})(d)},75:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(74);var o=n(1),r=n(6),s=n(8),a=n(58),i=n(11),c=n(57),u=n(10),l=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.compose;t.store=i.createStore(u.promsPageReducer,l(i.applyMiddleware(a.default))),t.store.subscribe(function(){return console.log(t.store.getState())}),r.render(o.createElement(s.Provider,{store:t.store},o.createElement(c.default,null)),document.getElementById("app"))}},[[75,0,1]]]);