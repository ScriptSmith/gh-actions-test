<!-- start demographics form launcher -->
{% load i18n %}
{% load translate %}
{% load lookup %}
<script>
  /*
  var USE_ACCORDION = false;
  var START_COLLAPSED = false;
  $(function() {
  if(USE_ACCORDION) {
  $(".collapsible" ).accordion({
  collapsible: true,
  active: !START_COLLAPSED
  }}
  );
  });
  */
  </script>

<style>
  .panel-body  {
    word-break:break-word
}
</style>

<div width="100%" class="panel panel-default collapsible">
  <div class="panel-body">
    {% if current_form_name == "Demographics" %}
     <i>{{ form_titles.Demographics  }}</i>
  {% else %}
     <a href="{{demographics_link}}">{{ form_titles.Demographics }}</a>
  {% endif %}
  </div>
</div>


{% if not consent_locked %}
<div width="100%" class="panel panel-default collapsible">
  <div class="panel-body">
    {% if current_form_name == "Consents" %}
     <i>{{ form_titles.Consents }}</i>
  {% else %}
     <a href="{{consents_link}}">{{ form_titles.Consents }}</a>
  {% endif %}
  </div>
</div>


{% if clinician_form_link %}
<div width="100%" class="panel panel-default collapsible">
  <div class="panel-body">
    {% if current_form_name == "Clinician" %}
     <i>{{ form_titles.Clinician }}</i>
  {% else %}
     <a href="{{clinician_form_link}}">{{ form_titles.Clinician }}</a>
  {% endif %}
  </div>
</div>
{% endif %}

{% if proms_link %}
<div width="100%" class="panel panel-default collapsible">
  <div class="panel-body">
    {% if current_form_name == "Proms" %}
     <i>{{ form_titles.Proms }}</i>
  {% else %}
     <a href="{{proms_link}}">{{ form_titles.Proms }}</a>
  {% endif %}
  </div>
</div>
{% endif %}


{% if family_linkage_link %}
<div width="100%" class="panel panel-default collapsible">
  <div class="panel-body">
      {% if current_form_name == "Family Linkage" %}
        <i>{{ form_titles|lookup:"Family linkage" }}</i>
      {% else %}
        <a href="{{family_linkage_link}}">{{ form_titles|lookup:"Family linkage" }}</a>
      {% endif %}
  </div>
</div>
{% endif %}

{% for type, context in context_form_groups %}
    {% if type == 'fixed' %}
        <div class="panel panel-default collapsible">
            <div class="panel-heading">
                {{context.name|translate}}
            </div>
            <div class="panel-body">
                {% for form in context.forms %}
                    <p>
                        {% if form.current %}
                            <i>{{form.text|translate}}</i>
                        {% else %}
                            <a href="{{form.url}}">{{form.text|translate}}</a>
                        {% endif %}
                    </p>
            {% endfor %}
            </div>
        </div>
    {% endif %}
    {% if type == 'multiple' %}
        <div width="100%" class="panel panel-default collapsible">
            <div class="panel-heading" data-toggle="collapse" data-target="#existing_{{multiple_context.id}}">
              {{context.heading}}
              {% if can_add_proms %}
              <a class="btn btn-info btn-xs pull-right"
                 onclick="location.href='{{context.add_link_url}}';">
                 <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add</a>
               {% endif %}
            </div>
            <div id="existing_{{context.id}}" class="panel-body">
              {% for link in context.existing_links %}
                  {% if not link.current %}
                     <a href="{{link.url}}">{% trans link.text %}</a><br>
                  {% else %}
                    <i>{{link.text}}</i><br>
                  {% endif %}
              {% endfor %}
            </div>
         </div>
    {% endif %}
{% endfor %}

{% else %}
<!-- consent locked -->
<div width="100%" class="panel panel-default collapsible">
  <div class="panel-body">
    {% if current_form_name == "Consents" %}
     <i>{% trans "Consents" %}</i>
  {% else %}
     <a href="{{consents_link}}">{% trans 'Consents' %}</a>
  {% endif %}
  </div>
</div>
  
{% endif %}

<!-- end demographics form launcher -->

