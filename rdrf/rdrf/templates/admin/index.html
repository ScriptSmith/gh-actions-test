{% extends "admin/base_site.html" %}
{% load i18n admin_static %}
{% load version_number %}

{% block extrastyle %}
  {{ block.super }}
  
  <script>
  $(document).ready(function() {
    if ({{ app_list|length }} > 1) {
      $('#full-menu').hide();
    }
    $('#full-menu-alert').click(function() {
      $('#full-menu').toggle('fast');
    });
  });
  </script>
{% endblock %}

{% block coltype %}colMS{% endblock %}

{% block bodyclass %}dashboard{% endblock %}

{% block breadcrumbs %}{% endblock %}

{% block content %}
  <div id="content-main">
    <div class="well">
      {% if app_list|length > 1 %}
        
      <div class="alert alert-info"><h4>{% trans 'Quick access links' %}</h4></div>
      
      <table class="table table-hover" summary="{% blocktrans with name=app.name %}Models available in the {{ name }} application.{% endblocktrans %}">
        <tr><th scope="row"><i class="icon-cog"></i> <a href="{% url 'admin:patients_patient_changelist' %}">{% trans 'Patients' %}</a></th></tr>
        <tr><th scope="row"><i class="icon-cog"></i> <a href="{% url 'admin:rdrf_questionnaireresponse_changelist' %}">{% trans 'Questionnaire Responses' %}</a></th></tr>
        {% if request.user.is_superuser %}
        <tr><th scope="row"><i class="icon-cog"></i> <a href="{% url 'admin:rdrf_registry_changelist' %}">{% trans 'Registries' %}</a></th></tr>
        <tr><th scope="row"><i class="icon-cog"></i> <a href="{% url 'admin:rdrf_registryform_changelist' %}">{% trans 'Registry Forms' %}</a></th></tr>
        <tr><th scope="row"><i class="icon-cog"></i> <a href="{% url 'admin:rdrf_commondataelement_changelist' %}">{% trans 'Data Elements' %}</a></th></tr>
        {% endif %}
      </table>
      <div class="btn btn-success btn-block" id="full-menu-alert"><h4>{% trans "Show full list of links" %}</h4></div>
      <br>

      {% endif %}

    <div id="full-menu">
    {% if app_list %}
      {% for app in app_list %}
        <div class="module">
          <table class="table-overview applist" summary="{% blocktrans with name=app.name %}Models available in the {{ name }} application.{% endblocktrans %}">
            <caption><a href="{{ app.app_url }}" class="section">{% trans app.name %}</a></caption>
            {% for model in app.models %}
              <tr>
                <th scope="row">{{ model.name }}</th>
                {% if model.admin_url %}
                  <td>
                    <a href="{{ model.admin_url }}" class="changelink icon">{% trans 'Change' %}</a>
                  </td>
                {% else %}
                  <td>&nbsp;</td>
                {% endif %}
                {% if model.add_url %}
                  <td><a href="{{ model.add_url }}" class="addlink icon"><i
                          class="icon-plus-sign icon-alpha75"></i>{% trans 'Add' %}
                  </a></td>
                {% else %}
                  <td>&nbsp;</td>
                {% endif %}
              </tr>
            {% endfor %}
          </table>
        </div>
      {% endfor %}
    {% else %}
      <p>{% trans "You don't have permission to edit anything." %}</p>
    {% endif %}
    </div>
    </div>
  </div>
{% endblock %}

{% block sidebar %}
  
  <div id="content-related">
    <div class="well">
      <h5 style="text-align: justify;">
        <strong>RDRF v{% version_number %} ( Rare Disease Registry Framework )</strong> is a tool for the creation of web-based data entry forms and questionnaires <br>
        based on reusable data element definitions ( "Common Data Elements" ) which can be created and/or loaded into the system<br>
        at runtime without changes to the source code. RDRF has been developed at the Centre of Comparative Genomics.
      </h5>
      <i class="icon-book"></i> <a href="http://rare-disease-registry-framework.readthedocs.org/en/latest/" target="_blank">Rare Disease Registry Framework Documentation</a>



       {% if request.user.notices %}
           <table>
            <caption>{% trans "Notices" %}</caption>
            <thead>
                <tr>
                    <th>{% trans "Type" %}</th>
                    <th>{% trans "Message" %}</th>
                    <th>{% trans "Date of the Notice" %}</th>
                </tr>
            </thead>
            <tbody>
                {% for notice in request.user.notices %}
                    {% if notice.is_unseen %}
                        <tr class="unseen_notice">
                    {% else %}
                        <tr class="notice">
                    {% endif %}
                        <td class="notice_type">[{% trans notice.notice_type.display %}]</td>
                        <td class="notice_message">{{ notice.message|safe }}</td>
                        <td class="notice_time">{{ notice.added|timesince }} {% trans "ago" %}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
       {% endif %}

    </div>
  </div>

{% endblock %}
